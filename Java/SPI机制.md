## SPI机制

> 为了实现在模块装配的时候不在程序里动态指明,需要一种服务发现机制.Java SPI就提供了这样一个机制,**为某个接口寻找服务实现的机制. 根据实际需要,启用/扩展/替换框架的实现策略**

使用SPI,需要遵守如下规定:

1. 当服务提供者提供了一种具体实现后,在jar包的MEAT-INF/service目录下创建一个"接口全限定名"命名的文件,内容是实现类的全限定名
2. 接口实现类所在的jar包放在主程序classpath中.
3. 主程序通过java.util.ServiceLoader 动态装载实现模块,通过扫描MEAT-INF/service目录下的配置文件,把实现类加载到jvm中
4. SPI的实现类必须携带一个无参构造函数



优点:

- 实现解构,使得接口的定义和具体实现分离. 应用程序可以根据实际需要替换实现.

缺点:

- 不能按需加载,接口的实现会全部实例化. 只能通过遍历去获取实例.
- 多线程情况下ServiceLoader不是线程安全的.