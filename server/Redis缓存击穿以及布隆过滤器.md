## 缓存雪崩

缓存大面积同时过期,所有请求直接到达数据库. 对数据库造成巨大压力. 形成连锁反应,造成系统崩溃.

解决方案
1. 原有的失效时间加一个随机时间.使缓存时间的过期时间分散开.

## 缓存穿透

查询数据库和缓存都没有的数据. 被用户恶意刷接口,造成数据库压力大.

解决方案
1. 布隆过滤器. 
2. 缓存空值. 设置很短的过期时间.
3. 增加参数校验.

## 缓存击穿

是指一个Key非常热点,不停的扛着高并发,高并发不停的对这一个key进行访问,在key失效的瞬间,持续的高并发穿破缓存,直接请求数据库.

解决方案
1. 设置热点数据不过期.

## 布隆过滤器

是由一个位数组和一组随机函数组成.布隆过滤器可以检索某个元素是否存在于某个集合中.
优点是空间效率和查询效率比较高,缺点是有一定的误差率和删除困难.

原理是当一个元素加入到集合时,使用一组随机函数进行计算,得到位数组中对应的位置,并把这些位置的值置为1.
判断元素是否存在时,首先对元素进行一组随机函数计算,然后判断得到的索引中的值是否全部为1,如果是,则说明元素可能存在集合中,如果有0,则集合中一定没有元素.

使用bloom filter时,预估数据量n和期盼的错误率fpp很重要. 

当期望误判率越低的情况下,位数组的容量越大.


